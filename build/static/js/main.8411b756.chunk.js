(this.webpackJsonpimessage=this.webpackJsonpimessage||[]).push([[0],{53:function(e,a,t){e.exports=t(81)},58:function(e,a,t){},63:function(e,a,t){},74:function(e,a,t){},75:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},79:function(e,a,t){},80:function(e,a,t){},81:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),i=t(15),l=t.n(i),r=(t(58),t(9)),s=(t(63),t(20)),o=Object(s.b)({name:"user",initialState:{user:null},reducers:{login:function(e,a){e.user=a.payload},logout:function(e){e.user=null}}}),m=o.actions,u=m.login,d=m.logout,h=function(e){return e.user.user},p=o.reducer,f=t(19),b=t(95),E=t(93),v=t(44),g=t.n(v),N=t(45),O=t.n(N),I=Object(s.b)({name:"chat",initialState:{chatId:null,chatName:null},reducers:{setChat:function(e,a){e.chatId=a.payload.chatId,e.chatName=a.payload.chatName}}}),_=I.actions.setChat,j=function(e){return e.chat.chatName},w=function(e){return e.chat.chatId},y=I.reducer,C=t(22),S=t.n(C),k=S.a.initializeApp({apiKey:"AIzaSyCq2mXkPqbrY6cmcCiiTAI0Cv_f1Pf_mDA",authDomain:"imessage-clone-hanbalahmed.firebaseapp.com",databaseURL:"https://imessage-clone-hanbalahmed.firebaseio.com",projectId:"imessage-clone-hanbalahmed",storageBucket:"imessage-clone-hanbalahmed.appspot.com",messagingSenderId:"77981789352",appId:"1:77981789352:web:d98228c1b9b4a565b8269d",measurementId:"G-JC6LVS40ZN"}).firestore(),J=S.a.auth(),Y=new S.a.auth.GoogleAuthProvider,D=k,L=(t(74),t(48));var T=function(e){var a,t,i,l,s=e.id,o=e.chatName,m=Object(r.b)(),u=Object(n.useState)([]),d=Object(f.a)(u,2),h=d[0],p=d[1];return Object(n.useEffect)((function(){D.collection("chats").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return p(e.docs.map((function(e){return e.data()})))}))}),[s]),c.a.createElement("div",{onClick:function(){return m(_({chatId:s,chatName:o}))},className:"sidebarChat"},c.a.createElement(b.a,{src:null===(a=h[0])||void 0===a?void 0:a.photo}),c.a.createElement("div",{className:"sidebarChat__info"},c.a.createElement("h3",null,o),c.a.createElement("p",null,null===(t=h[0])||void 0===t?void 0:t.message),c.a.createElement("small",null,L.a(new Date(null===(i=h[0])||void 0===i||null===(l=i.timestamp)||void 0===l?void 0:l.toDate())))))};t(75);var Z=function(){var e=Object(r.c)(h),a=Object(n.useState)([]),t=Object(f.a)(a,2),i=t[0],l=t[1];return Object(n.useEffect)((function(){D.collection("chats").onSnapshot((function(e){return l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement(b.a,{onClick:function(){return J.signOut()},src:e.photo,className:"sidebar__avatar"}),c.a.createElement("div",{className:"sidebar__input"},c.a.createElement(g.a,null),c.a.createElement("input",{placeholder:"Search"})),c.a.createElement(E.a,{variant:"outlined",className:"sidebar__inputButton"},c.a.createElement(O.a,{className:"red",onClick:function(){var e=prompt("Please enter a chat name");e&&D.collection("chats").add({chatName:e})}}))),c.a.createElement("div",{className:"sidebar__chats"},i.map((function(e){var a=e.id,t=e.data.chatName;return c.a.createElement(T,{key:a,id:a,chatName:t})}))))},A=t(47),W=t.n(A),z=(t(77),t(78),Object(n.forwardRef)((function(e,a){e.id;var t=e.contents,n=t.timestamp,i=(t.displayName,t.email),l=t.message,s=t.photo,o=(t.uid,Object(r.c)(h));return c.a.createElement("div",{ref:a,className:"message ".concat(o.email===i&&"message__sender")},c.a.createElement(b.a,{className:"message__photo",src:s}),c.a.createElement("p",null,l),c.a.createElement("small",null,new Date(null===n||void 0===n?void 0:n.toDate()).toLocaleString()))}))),M=t(46);var B=function(){var e=Object(r.c)(h),a=Object(n.useState)(""),t=Object(f.a)(a,2),i=t[0],l=t[1],s=Object(r.c)(j),o=Object(r.c)(w),m=Object(n.useState)([]),u=Object(f.a)(m,2),d=u[0],p=u[1];return Object(n.useEffect)((function(){o&&D.collection("chats").doc(o).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return p(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[o]),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__header"},c.a.createElement("h4",null,"To: ",c.a.createElement("span",{className:"chat__name"},s)),c.a.createElement("strong",null,"Details")),c.a.createElement("div",{className:"chat__messages"},c.a.createElement(M.a,null,d.map((function(e){var a=e.id,t=e.data;return c.a.createElement(z,{key:a,contents:t})})))),c.a.createElement("div",{className:"chat__input"},c.a.createElement("form",null,c.a.createElement("input",{value:i,onChange:function(e){return l(e.target.value)},placeholder:"send message",type:"text"}),c.a.createElement("button",{onClick:function(a){a.preventDefault(),D.collection("chats").doc(o).collection("messages").add({timestamp:S.a.firestore.FieldValue.serverTimestamp(),message:i,uid:e.uid,photo:e.photo,email:e.email,displayName:e.displayName}),l("")}},"Send Message")),c.a.createElement(E.a,null,c.a.createElement(W.a,{className:"chat__mic"}))))};t(79);var G=function(){return c.a.createElement("div",{className:"imessage"},c.a.createElement(Z,null),c.a.createElement(B,null))},U=t(94);t(80);var V=function(){return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"login__logo"},c.a.createElement("img",{src:"https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/a60c69b4-dbdc-49e3-b152-43bbdbfb0160/d6dy6qy-19e320f2-932f-4549-8050-2b7fb9289eda.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOiIsImlzcyI6InVybjphcHA6Iiwib2JqIjpbW3sicGF0aCI6IlwvZlwvYTYwYzY5YjQtZGJkYy00OWUzLWIxNTItNDNiYmRiZmIwMTYwXC9kNmR5NnF5LTE5ZTMyMGYyLTkzMmYtNDU0OS04MDUwLTJiN2ZiOTI4OWVkYS5wbmcifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6ZmlsZS5kb3dubG9hZCJdfQ.AQSIo8n9g9HHLZFVdCwqbDOjFg9DwZI35LCTIuLgtEw",alt:""}),c.a.createElement("h1",null,"iMessage clone")),c.a.createElement(U.a,{onClick:function(){J.signInWithPopup(Y).catch((function(e){return alert(e.message)}))}},"Sign In"))};var q=function(){var e=Object(r.c)(h),a=Object(r.b)();return Object(n.useEffect)((function(){J.onAuthStateChanged((function(e){a(e?u({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):d())}))})),c.a.createElement("div",{className:"app"},e?c.a.createElement(G,null):c.a.createElement(V,null))},x=Object(s.a)({reducer:{user:p,chat:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(r.a,{store:x},c.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[53,1,2]]]);
//# sourceMappingURL=main.8411b756.chunk.js.map